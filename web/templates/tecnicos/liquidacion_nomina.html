{% extends 'base.html' %}
{% load static %}

{% block title %}{{ titulo }} - Huellero CHVS{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/supervision.css' %}">
{% endblock %}

{% block container_class %}container-fluid{% endblock %}

{% block content %}
<!-- Navegaci贸n de usuario -->
<nav class="user-nav">
    <div class="user-nav__info">
        <span></span>
        <span class="user-nav__name">{{ user.get_full_name|default:user.username }}</span>
        <span class="user-nav__area">(Supervisi贸n)</span>
    </div>
    <div>
        <a href="{% url 'supervision:index' %}" class="user-nav__link"> Inicio</a>
        <a href="{% url 'users:logout' %}" class="user-nav__link"> Cerrar Sesi贸n</a>
    </div>
</nav>

<header class="header">
    <div class="header__icon"></div>
    <h1 class="header__title">{{ titulo }}</h1>
    <p class="header__subtitle">Corporaci贸n Hacia un Valle Solidario</p>
</header>

<section class="content-section">
    <!-- Barra de acciones -->
    <div class="actions-bar">
        <a href="{% url 'supervision:liquidacion_nomina' %}" class="btn btn--secondary">
             Actualizar Datos
        </a>
    </div>

    {% if error_message %}
    <div class="alert alert--warning">
        <span class="alert__icon">锔</span>
        <span><strong>Atenci贸n:</strong> {{ error_message }}</span>
    </div>
    {% endif %}

    <div class="card">
        <h2 class="card__title">
            <span class="card__title-icon"></span>
            Detalle de Liquidaci贸n (Google Sheets)
        </h2>

        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        {% for header in headers %}
                            <th>{{ header }}</th>
                        {% empty %}
                            <th>Sin datos</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in rows %}
                        <tr>
                            {% for cell in row %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="{{ headers|length|default:'1' }}" class="text-center">
                                No se encontraron registros.
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="table-info">
            <span>Total de registros: <strong>{{ rows|length }}</strong></span>
        </div>
    </div>
</section>
{% endblock %}