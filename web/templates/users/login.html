{% extends 'base.html' %}
{% load static %}

{% block title %}Iniciar Sesi√≥n{% endblock %}

{% block content %}
<div class="login-container">
    <div class="login-card">
        <div class="login-header">
            <div class="login-icon">üïê</div>
            <h1 class="login-title">Nominaap</h1>
            <p class="login-subtitle">Corporaci√≥n Hacia un Valle Solidario</p>
        </div>

        {% if error %}
        <div class="login-error">
            {{ error }}
        </div>
        {% endif %}

        <form method="post" class="login-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="username" class="form-label">Usuario</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    class="form-input"
                    placeholder="Ingrese su usuario"
                    autocomplete="username"
                    required
                    autofocus
                >
            </div>

            <div class="form-group">
                <label for="password" class="form-label">Contrase√±a</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    class="form-input"
                    placeholder="Ingrese su contrase√±a"
                    autocomplete="current-password"
                    required
                >
            </div>

            <button type="submit" class="btn btn--primary btn--block">
                üîê Iniciar Sesi√≥n
            </button>
        </form>
    </div>
</div>

<!-- Toast container -->
<div id="toastContainer" class="toast-container"></div>
{% endblock %}

{% block extra_js %}
<script>
    // Mostrar toast si hay mensaje
    {% if toast_message %}
    document.addEventListener('DOMContentLoaded', function() {
        showToast('{{ toast_message }}', '{{ toast_type }}');
    });
    {% endif %}

    function showToast(message, type = 'info') {
        const container = document.getElementById('toastContainer');
        const toast = document.createElement('div');
        toast.className = `toast toast--${type}`;
        toast.innerHTML = `
            <span class="toast__icon">${type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è'}</span>
            <span class="toast__message">${message}</span>
        `;
        container.appendChild(toast);

        // Mostrar con animaci√≥n
        setTimeout(() => toast.classList.add('toast--visible'), 10);

        // Ocultar despu√©s de 4 segundos
        setTimeout(() => {
            toast.classList.remove('toast--visible');
            setTimeout(() => toast.remove(), 300);
        }, 4000);
    }
</script>
{% endblock %}
